<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>De Onderhoud Centrale - Afstelinstructies en doelwaarden voor CV-ketels, Warmtepompen en WTW/MV</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* Basiskleuren en font (design system) */
        :root {
            --color-bg-primary: #fcfcf9;
            --color-surface: #fffdfd;
            --color-text: #134252;
            --color-text-secondary: #626c71;
            --color-primary: #218D8D;
            --color-primary-hover: #1d7480;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-card-border: rgba(94, 82, 64, 0.12);
            --color-error: #c0152f;
            --color-success: #218D8D;
            --color-warning: #a84b2f;
            --radius-base: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.04), 0 2px 4px -1px rgba(0,0,0,0.02);
        }
        body[data-theme="dark"], body[data-theme="dark"] * {
            --color-bg-primary: #1f2121;
            --color-surface: #262828;
            --color-text: #f5f5f5;
            --color-text-secondary: rgba(167, 169, 169, 0.7);
            --color-primary: #32b8c6;
            --color-primary-hover: #2da6b2;
            --color-border: rgba(119, 124, 124, 0.3);
            --color-card-border: rgba(119, 124, 124, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--color-text); background: var(--color-bg-primary); line-height: 1.5;
            font-size: 16px;
        }

        @media (max-width: 1024px) {
            .container { max-width: 100vw; padding: 0 10px;}
        }
        .container {
            max-width: 1280px; margin: 0 auto; padding: 0 20px;
        }
        .header, .filters, .system-card, .admin-section { background: var(--color-surface);}
        .header { border-bottom: 1px solid var(--color-border); padding: 16px 0 8px 0; margin-bottom: 16px;}
        .header-content { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 16px;}
        .header-title { display: flex; align-items: center; gap: 8px;}
        .header-title h1 { font-size: 22px; font-weight: 600;}
        .header-subtitle { font-size: 13px; color: var(--color-text-secondary);}
        .btn { display: inline-flex; align-items: center; gap: 8px; padding:8px 14px; border-radius: var(--radius-base); font-size: 15px; font-weight: 500;
            cursor:pointer; border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); transition:all 0.2s;}
        .btn:hover { background:rgba(33,141,141,0.08); border-color:var(--color-primary);}
        .btn-primary{ background: var(--color-primary); color:#fff; border-color:var(--color-primary);}
        .btn-primary:hover{ background: var(--color-primary-hover);}
        .icon-btn { background: none; border:none; cursor:pointer; padding:8px; border-radius: var(--radius-base);}
        .icon-btn.active { color:#fa0;}
        .filters{ border:1px solid var(--color-card-border); border-radius:var(--radius-lg); margin-bottom:18px; padding:14px;}
        .filters-row { display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap:8px; margin-bottom:8px;}
        @media (max-width:480px) { .filters-row { grid-template-columns: 1fr;} }
        .form-group { display:flex; flex-direction:column; gap: 2px;}
        .form-control{ padding:8px 10px; border:1px solid var(--color-border); border-radius:var(--radius-base); background: var(--color-bg-primary); color: var(--color-text);}
        .form-control:focus{ outline:2px solid var(--color-primary); border-color:var(--color-primary);}
        .search-input { position:relative;}
        .search-icon{ position:absolute; left:8px; top:50%; transform: translateY(-50%);color:var(--color-text-secondary);}
        .search-input input{ padding-left:34px;}
        .results-count{ font-size:12px; color: var(--color-text-secondary);}
        .cards-grid{ display:grid; grid-template-columns:repeat(auto-fill, minmax(350px, 1fr)); gap: 12px;}
        .system-card{ border:1px solid var(--color-card-border); border-radius:var(--radius-lg); padding:12px; box-shadow:var(--shadow-sm);}
        @media (max-width:480px) {
            .cards-grid { grid-template-columns:1fr;}
            .system-card{padding:8px;}
            .header-title h1 {font-size:17px;}
        }
        @media (max-width:900px) {
            .cards-grid{ grid-template-columns: 1fr;}
        }
        .card-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:8px;}
        .card-header-with-logo{display:flex;gap:6px;align-items:start;}
        .brand-logo{width:36px; height:36px; object-fit:contain; border-radius:var(--radius-base); background:#fff; padding:2px; border:1px solid var(--color-card-border);}
        .card-title{font-size:15px; font-weight:600;}
        .card-badge{padding:2px 9px;font-size:11px; background:rgba(33,141,141,0.1); color:var(--color-primary);border-radius:16px;}
        .card-actions{display:flex;gap:6px;}
        .card-section{margin-bottom:12px;}
        .card-section-title{font-size:13px;font-weight:600;color:var(--color-text); margin-bottom:3px;display:flex;align-items:center;gap:8px;}
        .procedure-text{font-size:13px;color:var(--color-text-secondary);white-space:pre-line;}
        .values-grid{display:grid;gap:4px;}
        .value-item{display:flex;align-items:center; gap:8px; padding:8px;background:rgba(33,141,141,0.04);border-radius:var(--radius-base);}
        .notes-section{background:rgba(245,158,11,0.08);border:1px solid rgba(245,158,11,0.17);border-radius:var(--radius-base);padding:8px;}
        .notes-title{font-size:12px;font-weight:600;color:#d97706;margin-bottom:4px;}
        .notes-text{font-size:12px;}
        .parts-list{background:rgba(33,141,141,0.04);border:1px solid rgba(33,141,141,0.13);border-radius:var(--radius-base);padding:8px;}
        .parts-title{font-size:12px;font-weight:600;color:var(--color-text);margin-bottom:6px;}
        .parts-text{font-size:12px;color:var(--color-text-secondary);white-space:pre-line;}
        .loading,.empty-state{text-align:center;padding:32px;color:var(--color-text-secondary);}
        .modal{ display:none; position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center;padding:12px;}
        .modal.active{display:flex;}
        .modal-content{ background:var(--color-surface);border-radius:var(--radius-lg);padding:14px;width:100%;max-width:410px;overflow-y:auto;}
        .modal-content.wide{ max-width:700px;}
        .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
        .modal-title{font-size:16px;font-weight:600;}
        .modal-body{display:flex;flex-direction:column;gap:10px;}
        .modal-footer{display:flex;gap:12px;justify-content:flex-end;margin-top:10px;}
        .auth-container{max-width:360px;margin:50px auto;padding:18px;}
        .auth-card{background:var(--color-surface);border:1px solid var(--color-card-border);border-radius:var(--radius-lg);padding:18px;box-shadow:var(--shadow-md);}
        .auth-title{font-size:20px;font-weight:600;margin-bottom:7px;text-align:center;}
        .auth-subtitle{color:var(--color-text-secondary);text-align:center;margin-bottom:14px;}
        .hidden{display:none !important;}
        .icon{width:18px;height:18px;}
        .admin-section{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-card-border);margin-bottom:18px; padding:14px;}
        .image-gallery { display:grid; grid-template-columns:repeat(auto-fill, minmax(70px,1fr));gap:6px;margin-top:4px;}
        .gallery-item{position:relative;aspect-ratio:1;border-radius:var(--radius-base);overflow:hidden;cursor:pointer; border:1px solid var(--color-border);}
        .gallery-item img { width:100%;height:100%;object-fit:cover;}
        .gallery-item-delete{position:absolute;top:2px;right:2px;background:rgba(192,21,47,0.87);color:white;border:none;border-radius:50%;width:19px;height:19px;cursor:pointer;font-size:13px;opacity:0;transition:opacity 0.2s;}
        .gallery-item:hover .gallery-item-delete { opacity:1;}
        .upload-zone{border:2px dashed var(--color-border);border-radius:var(--radius-base);padding:10px;text-align:center; cursor:pointer;}
        .image-count{font-size:10px;color:var(--color-text-secondary);}
        .lightbox{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.91);z-index:2000;align-items:center;justify-content:center;}
        .lightbox.active{display:flex;}
        .lightbox-content{position:relative;max-width:95vw;max-height:95vh;}
        .lightbox-img{max-width:100%;max-height:100%;border-radius:var(--radius-lg);}
        .lightbox-close{position:absolute;top:10px;right:10px;background:rgba(0,0,0,0.67);color:white;border:none;border-radius:50%;width:35px;height:35px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:19px;}
        /* IPHONE/IPAD specifieke tweaks */
        @media (max-width:430px) {
            html, body { font-size: 15px;}
            .system-card, .modal-content {padding:6px;}
            .modal-title{font-size:14px;}
        }
        @media (max-width:375px) {
            .container,.modal-content{padding:2px;}
        }
        /* Specifiek voor iPad liggend */
        @media (min-width:768px) and (max-width:1024px) and (orientation: landscape) {
            .cards-grid{grid-template-columns:repeat(2, 1fr);}
        }
    </style>
</head>
<body>
    <!-- Auth Container -->
    <div id="authContainer" class="auth-container hidden">
        <div class="auth-card">
            <h1 class="auth-title">De Onderhoud Centrale</h1>
            <p class="auth-subtitle">Log in om afstelinstructies te bekijken</p>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" class="form-control" required placeholder="jouw@email.nl">
                </div>
                <div class="form-group">
                    <label for="password">Wachtwoord</label>
                    <input type="password" id="password" class="form-control" required placeholder="••••••••">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%;margin-top:12px;">Inloggen</button>
            </form>
        </div>
    </div>
    <!-- Hieronder komt de rest van de app precies als nu, inclusief de modals -->
    <!-- ... [Plaats bestaande main app (UI, JS, modals, cards, etc.) hier] ... -->
    <!-- Voeg in de Add/Edit modal (de juiste .form-group blokken!): -->
    <!--
    <div class="form-group">
        <label>Handleiding datum (optioneel)</label>
        <input type="date" id="addRevisionDate" class="form-control">
    </div>
    -->
    <!-- En in Edit -->
    <!--
    <div class="form-group">
        <label>Handleiding datum (optioneel)</label>
        <input type="date" id="editRevisionDate" class="form-control">
    </div>
    -->
    <!-- Voeg daarnaast de logic toe in add/editSubmit (manual_revision_date) en tonen in kaart zoals uitgelegd in onze eerdere stappen. -->
</body>
</html>
